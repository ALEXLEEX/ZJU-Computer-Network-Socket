# PACKET

---

## TODOs

- [x] 添加包体参数列表
- [x] 添加终端学号信息的记录
- [ ] 添加解码端的校验检查功能

---

## IDEA

### 总体思路

采用`std::string`进行传输，所有数据编码成固定格式的字符串用于网络传输

在终端，要传输的数据都存储在数据包结构`Packet`中，通过编码(*Encode*)成字符串流进行传输，然后在接收端进行解码(*Decode*)将字符串解码成数据包结构，然后处理数据

本质来说，**数据包格式就是一个有关字符串编码与解码的工作**

### 数据包格式

#### 总体格式

| 字段 | 字节数量 | 含义 | 值或范围 | 备注 |
| :--: | :--: | :--: | :--: | :--: |
| type | 1 | 数据包类型 | 1~3 | 1: 请求，2：响应，3:指示 |
| content | 1 | 数据包内容 | 1~6 | 数据包内容 |
| id | 1 | 数据包ID | 0~255 | 重复滚动 |
| length | 2 | 数据包长度 | 0~65535 | 包体部分的长度 |
| args | N | 包体 | N个字节 | 包体部分，N=长度字段 |
| checksum | 16 | 校验部分 | 大写十六进制 | 对包体部分+学号后的MD5值 |
| 结束标记 | 1 | 结束标记 | `\n` | 用于区分数据包的结束 |

##### 数据包类型

- 请求数据包(`PacketType::REQUEST`)，客户端调用
- 响应数据包(`PacketType::RESPONSE`)，服务端调用
- 指示数据包(`PacketType::ASSIGNMENT`)，服务端调用

#### 请求数据包
